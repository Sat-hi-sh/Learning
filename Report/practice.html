<!DOCTYPE html>
<html>

<head>

<style>

</style>

</head>

<body width="1260">

<canvas id="flagCanvas" width="1260" height="709"></canvas>

<script>

const canvas = document.getElementById("flagCanvas");
const ctx = canvas.getContext("2d");

ctx.lineWidth = 4;

const circle = {
  x: 750,
  y: 350,
  radius: 40,
  color: "white"
};

function drawCircle() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.beginPath();
  ctx.arc(circle.x, circle.y, circle.radius, 0, 2 * Math.PI);
  ctx.strokeStyle = "black";
  ctx.fillStyle = circle.color;
  ctx.stroke();
  ctx.fill();
}

var id = null;
var id1 = null;

function CircleBouncing() {
  clearInterval(id);
  clearInterval(id1);

  let angle = Math.random() * Math.PI;

  if (Math.abs(angle - Math.PI / 2) < 0.001) {
    angle = Math.PI / 2;
  }

  let rd = Math.random() * 180;

  let updatedCY = circle.y - 40; // Move up one step

  let UpdatedCX = circle.x + rd * Math.cos(angle);

  // Edge case for width
  if (UpdatedCX < 40) {
    UpdatedCX = 50;
  } else if (UpdatedCX > 1280) {
    UpdatedCX = 1280;
  }

  circle.x = UpdatedCX;

  id = setInterval(Move, 2);

  function Move() {
    if (circle.y >= updatedCY) {
      clearInterval(id);
      id1 = setInterval(DownFall, 50);
    } else {
      clearInterval(id1);
    }

    circle.y -= 1;

    // Edge cases for height
    if (circle.y < 0) {
      circle.y = 50;
    } else if (circle.y > 709) {
      circle.y = 709;
    }

    drawCircle();
  }

  function DownFall() {
    if (circle.y <= canvas.height - 40) {
      circle.y++;
      drawCircle();
    } else {
      clearInterval(id1);
    }
  }
}

canvas.addEventListener("click", CircleBouncing);

drawCircle(); // Initial drawing

</script>

</body>
</html>
